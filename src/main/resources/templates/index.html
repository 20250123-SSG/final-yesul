<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<!-- 공통 헤드 -->
<head th:replace="~{fragments/user/head :: head}"></head>

<body>
<!-- 공통 헤더 -->
<div th:replace="~{fragments/user/header :: header}"></div>

<!-- Hero Slider Start -->
<section class="section gi-hero m-tb-40">
  <div class="container">
    <div class="gi-main-content">
      <!-- Hero Slider Start -->
      <div class="gi-slider-content">
        <div class="gi-main-slider">
          <div class="gi-slider swiper-container main-slider-nav main-slider-dot">
            <!-- Main slider  -->
            <div class="swiper-wrapper">
              <div class="gi-slide-item swiper-slide d-flex slide-1">
                <div class="gi-slide-content slider-animation">
                  <p><b>Yesul</b>에서 시작하세요</p>
                  <h1 class="gi-slide-title">예술과 함께, 전통주의 매력을 발견해보세요</h1>
                  <div class="gi-slide-btn">
                    <a th:href="@{/alcohols/ai}" class="gi-btn-1">전통주 찾기 <i
                      class="fi-rr-angle-double-small-right" aria-hidden="true"></i></a>
                  </div>
                </div>
              </div>
              <div class="gi-slide-item swiper-slide d-flex slide-2">
                <div class="gi-slide-content slider-animation">
                  <p style="color: navajowhite !important;">여행과 <b>양조장</b></p>
                  <h1 class="gi-slide-title" style="color: white !important;">향기로운 술 내음 따라, 양조장으로의 여행</h1>
                  <div class="gi-slide-btn">
                    <a th:href="@{https://thesooltourism.com/}" class="gi-btn-1">지금 출발 <i
                      class="fi-rr-angle-double-small-right" aria-hidden="true"></i></a>
                  </div>
                </div>
              </div>
            </div>
            <div class="swiper-pagination swiper-pagination-white"></div>
            <div class="swiper-buttons">
              <div class="swiper-button-next"></div>
              <div class="swiper-button-prev"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Hero Slider End -->

<!-- Category section -->
<section class="gi-category body-bg padding-tb-40 wow fadeInUp" data-wow-duration="2s">
  <div class="container">
    <div class="row m-b-minus-15px">
      <div class="col-xl-12 border-content-color">
        <div class="gi-category-block owl-carousel">
          <div class="gi-cat-box gi-cat-box-1">
            <div class="gi-cat-icon">
              <div class="gi-cat-detail">
                <a href="/alcohols/unrefined-rice-wine">
                  <h4 class="gi-cat-title">탁주</h4>
                </a>
              </div>
            </div>
          </div>
          <div class="gi-cat-box gi-cat-box-2">
            <div class="gi-cat-icon">
              <div class="gi-cat-detail">
                <a href="/alcohols/herbal-rice-wine">
                  <h4 class="gi-cat-title">약주</h4>
                </a>
              </div>
            </div>
          </div>
          <div class="gi-cat-box gi-cat-box-3">
            <div class="gi-cat-icon">
              <div class="gi-cat-detail">
                <a href="/alcohols/clear-rice-wine">
                  <h4 class="gi-cat-title">청주</h4>
                </a>
              </div>
            </div>
          </div>
          <div class="gi-cat-box gi-cat-box-4">
            <div class="gi-cat-icon">
              <div class="gi-cat-detail">
                <a href="/alcohols/fruit-wine">
                  <h4 class="gi-cat-title">과실주</h4>
                </a>
              </div>
            </div>
          </div>
          <div class="gi-cat-box gi-cat-box-5">
            <div class="gi-cat-icon">
              <div class="gi-cat-detail">
                <a href="/alcohols/distilled-liquor">
                  <h4 class="gi-cat-title">증류주</h4>
                </a>
              </div>
            </div>
          </div>
          <div class="gi-cat-box gi-cat-box-6">
            <div class="gi-cat-icon">
              <div class="gi-cat-detail">
                <a href="/alcohols/liqueur">
                  <h4 class="gi-cat-title">리큐르</h4>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Category section End -->

<!-- Trending, Top Rated Start -->
<section class="gi-offer-section padding-tb-40">
  <div class="container">
    <div class="row">
      <!-- Banner -->
      <div
        class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-xs-6 gi-all-product-content gi-new-product-content wow fadeInUp">
        <div class="gi-banner-inner">
          <div class="gi-banner-block gi-banner-block-1">
            <div class="banner-block">
              <div class="banner-content">
                <div class="banner-text">
                                    <span class="gi-banner-title" style="color: white !important; text-shadow:
    -1px -1px 0 #000,
     1px -1px 0 #000,
    -1px  1px 0 #000,
     1px  1px 0 #000;"><br>AI 주락이 <br>전통주 추천!</span>
                </div>
                <a th:href="@{/alcohols/ai}" class="gi-btn-2">추천받기</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- 지역 전통주 -->
      <!-- 지역 전통주 1 -->
      <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-xs-6 gi-all-product-content gi-new-product-content mt-1199-40 wow fadeInUp" data-wow-delay=".6s">
        <div class="col-md-12">
          <div class="section-title">
            <div class="section-detail">
              <h2 class="gi-title"><span id="region-title-1">지역</span> 전통주</h2>
            </div>
          </div>
        </div>
        <div class="gi-rated-slider">
          <div class="gi-trending-slider" id="alcohol-list-1"></div>
        </div>
      </div>

      <!-- 지역 전통주 2 -->
      <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-xs-6 gi-all-product-content gi-new-product-content mt-1199-40 wow fadeInUp" data-wow-delay=".7s">
        <div class="col-md-12">
          <div class="section-title">
            <div class="section-detail">
              <h2 class="gi-title"><span id="region-title-2">지역</span> 전통주</h2>
            </div>
          </div>
        </div>
        <div class="gi-rated-slider">
          <div class="gi-trending-slider" id="alcohol-list-2"></div>
        </div>
      </div>

      <!-- 지역 전통주 3 -->
      <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-xs-6 gi-all-product-content gi-new-product-content mt-1199-40 wow fadeInUp" data-wow-delay=".8s">
        <div class="col-md-12">
          <div class="section-title">
            <div class="section-detail">
              <h2 class="gi-title"><span id="region-title-3">지역</span> 전통주</h2>
            </div>
          </div>
        </div>
        <div class="gi-rated-slider">
          <div class="gi-trending-slider" id="alcohol-list-3"></div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Trending, Top Rated End -->

<!-- 커뮤니티 Community Section Start -->
<section class="gi-blog-section padding-tb-40 wow fadeInUp">
  <div class="container">
    <div class="row m-b-minus-24px">
      <div class="section-title">
        <div class="section-detail">
          <h2 class="gi-title">예술 <span>커뮤니티</span></h2>
          <p>전통주에 대해 이야기 나눠보세요.</p>
        </div>
        <span class="title-link">
                        <a th:href="@{/community/recipe}">커뮤니티 전체보기<i class="fi-rr-angle-double-small-right"></i></a>
                    </span>
      </div>
      <div class="gi-blog-carousel owl-carousel">
        <div class="gi-blog-item" th:each="post : ${randomPopularPosts}">
          <div class="blog-info">
            <figure class="blog-img">
              <a th:href="@{/community/{board}/{id}(board=${post.boardName}, id=${post.id})}">
                <img th:src="${post.thumbnail != null ? post.thumbnail : '/assets/img/community/mainLogo.jpg'}"
                     alt="news image">
              </a>
            </figure>
            <div class="detail">
              <h3 style="margin-top: 18px;">
                <a th:href="@{/community/{board}/{id}(board=${post.boardName}, id=${post.id})}"
                   th:text="${post.title != null ? post.title : '제목 없음'}"
                   style="display: block; width: 100%; text-align: center;">
                  제목
                </a>
              </h3>
            </div>
          </div>
        </div>
        <div class="gi-blog-item">
          <div class="blog-info">
            <figure class="blog-img"><a href="#"><img src="assets/img/blog/2.jpg" alt="news imag"></a>
            </figure>
            <div class="detail">
              <label>April 02,2022 - <a href="#">Fruits</a></label>
              <h3><a href="#">Best way to solve business deal issue in market.</a></h3>
              <div class="more-info">
                <a href="blog-detail-left-sidebar.html">Read More<i
                  class="fi-rr-angle-double-small-right"></i></a>
              </div>
            </div>
          </div>
        </div>
        <div class="gi-blog-item">
          <div class="blog-info">
            <figure class="blog-img"><a href="#"><img src="assets/img/blog/3.jpg" alt="news imag"></a>
            </figure>
            <div class="detail">
              <label>Mar 09,2022 - <a href="#">Vegetables</a></label>
              <h3><a href="#">31 grocery customer service stats know in 2019.</a></h3>
              <div class="more-info">
                <a href="blog-detail-left-sidebar.html">Read More<i
                  class="fi-rr-angle-double-small-right"></i></a>
              </div>
            </div>
          </div>
        </div>
        <div class="gi-blog-item">
          <div class="blog-info">
            <figure class="blog-img"><a href="#"><img src="assets/img/blog/4.jpg" alt="news imag"></a>
            </figure>
            <div class="detail">
              <label>January 25,2022 - <a href="#">Fastfood</a></label>
              <h3><a href="#">Business ideas to grow your business traffic.</a></h3>
              <div class="more-info">
                <a href="blog-detail-left-sidebar.html">Read More<i
                  class="fi-rr-angle-double-small-right"></i></a>
              </div>
            </div>
          </div>
        </div>
        <div class="gi-blog-item">
          <div class="blog-info">
            <figure class="blog-img"><a href="#"><img src="assets/img/blog/5.jpg" alt="news imag"></a>
            </figure>
            <div class="detail">
              <label>December 10,2021 - <a href="#">Fruits</a></label>
              <h3><a href="#">Marketing Guide: 5 Steps way to Success.</a></h3>
              <div class="more-info">
                <a href="blog-detail-left-sidebar.html">Read More<i
                  class="fi-rr-angle-double-small-right"></i></a>
              </div>
            </div>
          </div>
        </div>
        <div class="gi-blog-item">
          <div class="blog-info">
            <figure class="blog-img"><a href="#"><img src="assets/img/blog/6.jpg" alt="news imag"></a>
            </figure>
            <div class="detail">
              <label>August 08,2021 - <a href="#">Vegetables</a></label>
              <h3><a href="#">15 customer service stats idea know in 2023.</a></h3>
              <div class="more-info">
                <a href="blog-detail-left-sidebar.html">Read More<i
                  class="fi-rr-angle-double-small-right"></i></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Blog Section End -->

<!-- Service Section -->
<section class="gi-service-section padding-tb-40">
  <div class="container">
    <div class="row m-tb-minus-12">
      <div class="gi-ser-content gi-ser-content-1 col-sm-6 col-md-6 col-lg-3 p-tp-12 wow fadeInUp">
        <div class="gi-ser-inner">
          <div class="gi-service-image">
            <i class="fi fi-ts-truck-moving"></i>
          </div>
          <div class="gi-service-desc">
            <h3>지역별 전통주</h3>
            <p>전국 각 지역의 다양한 전통주를 만나보세요.</p>
          </div>
        </div>
      </div>
      <div class="gi-ser-content gi-ser-content-2 col-sm-6 col-md-6 col-lg-3 p-tp-12 wow fadeInUp"
           data-wow-delay=".4s">
        <div class="gi-ser-inner">
          <div class="gi-service-image">
            <i class="fi fi-ts-hand-holding-seeding"></i>
          </div>
          <div class="gi-service-desc">
            <h3>지역 발전</h3>
            <p>전통주를 통해 지역 경제와 문화의 발전을 함께 이끌어갑니다.</p>
          </div>
        </div>
      </div>
      <div class="gi-ser-content gi-ser-content-3 col-sm-6 col-md-6 col-lg-3 p-tp-12 wow fadeInUp"
           data-wow-delay=".6s">
        <div class="gi-ser-inner">
          <div class="gi-service-image">
            <i class="fi fi-ts-diagram-project"></i>
          </div>
          <div class="gi-service-desc">
            <h3>AI</h3>
            <p>AI가 취향에 맞는 전통주와 여행지를 추천해드립니다.</p>
          </div>
        </div>
      </div>
      <div class="gi-ser-content gi-ser-content-4 col-sm-6 col-md-6 col-lg-3 p-tp-12 wow fadeInUp"
           data-wow-delay=".8s">
        <div class="gi-ser-inner">
          <div class="gi-service-image">
            <i class="fi fi-rr-comment"></i>
          </div>
          <div class="gi-service-desc">
            <h3>커뮤니티</h3>
            <p>전통주에 관심 있는 사람들과 함께 이야기 나눠보세요.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Service Section End -->

<!-- Back to top  -->
<a class="gi-back-to-top"></a>

<!-- Newsletter Modal Start -->
<div id="gi-popnews-bg"></div>
<div id="gi-popnews-box">
  <div id="gi-popnews-close">×</div>
  <div class="row">
    <div class="col-md-6 disp-no-767">
      <img src="assets/img/yesul/AI/bartender_ai.png" alt="yesul_bartender">
    </div>
    <div class="col-md-6">
      <div id="gi-popnews-box-content">
        <h2>전통주 추천받기</h2>
        <p>AI <strong>주락이</strong>가
          <br>
          전통주를 취향에 맞춰 추천해 드립니다!</p>
        <br>
        <form id="gi-popnews-form" action="#" method="post">
          <a th:href="@{/alcohols/ai}" class="gi-btn-2">추천 받기</a>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Newsletter Modal end -->

<!-- 공통 feature -->
<div th:fragment="feature">
  <div th:replace="~{fragments/user/feature :: feature}"></div>
</div>

<!-- 공통 푸터 -->
<div th:fragment="footer">
  <div th:replace="~{fragments/user/footer :: footer}"></div>
</div>

<!-- 공통 js -->
<div th:fragment="js">
  <div th:replace="~{fragments/user/js :: js}"></div>
</div>

<script>
  const provinces = [
    '서울특별시', '울산광역시', '경기도', '강원특별자치도', '충청북도', '충청남도',
    '전라북도', '전라남도', '경상북도', '경상남도', '제주특별자치도'
  ];

  // 중복 없는 지역 3개 뽑기
  function getThreeRandomProvinces() {
    const shuffled = [...provinces].sort(() => Math.random() - 0.5);
    return shuffled.slice(0, 3);
  }

  async function fetchAlcoholsByProvince(province, page = 0, size = 3) {
    const encoded = encodeURIComponent(province);
    const res = await fetch(`/alcohols?province=${encoded}&page=${page}&size=${size}`);
    const data = await res.json();
    return data.content || data;
  }

  function renderAlcoholCard(alcohol) {
    return `
      <div class="col-sm-12 gi-all-product-block">
        <div class="gi-all-product-inner">
          <div class="gi-pro-image-outer">
            <div class="gi-pro-image">
              <a href="/alcohols/detail/${alcohol.id}" class="image">
                <img class="main-image" src="${alcohol.image}" alt="${alcohol.name}">
              </a>
            </div>
          </div>
          <div class="gi-pro-content">
            <h5 class="gi-pro-title"><a href="/alcohols/detail/${alcohol.id}">${alcohol.name}</a></h5>
            <h6 class="gi-pro-stitle">${alcohol.type || alcohol.brand || ''}</h6>
            <div class="gi-pro-rat-price">
              <div class="gi-pro-rat-pri-inner">
                <span class="gi-price">
                  <span class="new-price">${alcohol.price?.toLocaleString() || '가격 미정'}원</span>
                  <span class="qty">- ${alcohol.volumeMl} ml</span>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    `;
  }

  async function renderMultipleAlcoholLists() {
    const selectedProvinces = getThreeRandomProvinces();

    for (let i = 0; i < selectedProvinces.length; i++) {
      const province = selectedProvinces[i];
      const titleEl = document.getElementById(`region-title-${i + 1}`);
      const container = document.getElementById(`alcohol-list-${i + 1}`);

      if (!titleEl || !container) continue;

      titleEl.textContent = `${province}`;

      const alcohols = await fetchAlcoholsByProvince(province);
      container.innerHTML = '';

      alcohols.forEach(alcohol => {
        container.insertAdjacentHTML('beforeend', renderAlcoholCard(alcohol));
      });
    }
  }

  document.addEventListener('DOMContentLoaded', renderMultipleAlcoholLists);
</script>
</body>

</html>